{% extends "en-us/search/event/CompanyEventGenSearchPage.htm" %}
{% include "en-us/ArticlePart.htm" %}
{%- block htmBodyMiddleCompanyEventPage %}
{% if resultCount > 0 %}
<script type="module">

  Promise.all([
    customElements.whenDefined('wa-button')
    , customElements.whenDefined('wa-input')
  ]).then(() => {
    {% for result in listCompanyEvent %}
    document.querySelector('#dialog-card-link-{{ result.pageId }}').addEventListener('click', (event) => {
      event.preventDefault();
      document.querySelector('#dialog-{{ result.pageId }}').open = true;
      return false;
    });
    {% endfor %}
  });
</script>
<div class="wa-stack wa-align-items-center" style="max-width: 105ch; margin: 0 auto;">
  <div class="wa-grid" style="--min-column-size: 40ch;">
    {% for result in listCompanyEvent %}
    <a class="wa-link-plain " href="{{ result.displayPage }}" id="dialog-card-link-{{ result.pageId }}">
      <wa-card>
        <div slot="media" class="wa-frame:landscape "{% if result.pageImageWidth %} style="aspect-ratio: {{ result.pageImageWidth }} / {{ result.pageImageHeight }}; "{% endif %}>
          <img
              
              src="{{ STATIC_BASE_URL }}{{ result.pageImageUri }}"
              {% if result.pageImageAlt is defined %}
              alt="{{ result.pageImageAlt | e }}"
              {% endif %}
              />
        </div>
        <div slot="header" class="wa-stack ">
          <div class="wa-heading-xl ">
            {{ result.name | e }}
          </div>
          <div class="wa-stack wa-caption-l wa-gap-3xs ">
            <wa-relative-time format="long" sync="true" date="{{ formatZonedDateTime(result.startDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-relative-time>
            <div class="wa-cluster ">
              <div>
                <wa-format-date weekday="short" month="short" day="numeric" year="numeric" date="{{ formatZonedDateTime(result.startDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-format-date>
              </div>
              <div>
                –
              </div>
              <div>
                <wa-format-date weekday="short" month="short" day="numeric" year="numeric" date="{{ formatZonedDateTime(result.endDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-format-date>
              </div>
            </div>
          </div>
        </div>
        <div class="wa-stack ">
          <p>
            {{ result.description | e }}
          </p>
          <wa-button variant="brand" id="dialog-button-{{ result.pageId }}" data-dialog="open dialog-{{ result.pageId }}">Learn more</wa-button>
        </div>
      </wa-card>
    </a>
    {% endfor %}
    {% for result in listCompanyEvent %}
    <wa-dialog label="{{ result.name | e }}" id="dialog-{{ result.pageId }}" light-dismiss style="--width: 60rem; ">
      <div class="wa-stack ">
        <h6 class="wa-stack wa-gap-3xs ">
          <wa-relative-time format="long" sync="true" date="{{ formatZonedDateTime(result.startDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-relative-time>
          <div class="wa-cluster ">
            <div>
              <wa-format-date weekday="short" month="short" day="numeric" year="numeric" hour="numeric" minute="numeric" date="{{ formatZonedDateTime(result.startDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-format-date>
            </div>
            <div>
              –
            </div>
            <div>
              <wa-format-date weekday="short" month="short" day="numeric" year="numeric" hour="numeric" minute="numeric" time-zone-name="short" date="{{ formatZonedDateTime(result.endDateTime, "yyyy-MM-dd'T'HH:mm:ss.SSSX", defaultLocaleId, "UTC") }}"></wa-format-date>
            </div>
          </div>
        </h6>
        {% include result.dialogTemplate %}
      </div>
      <wa-button slot="footer" variant="brand" href="{{ result.displayPage }}">
        Go to the event page <i class="{{ FONTAWESOME_STYLE }}fa-newspaper"></i>
      </wa-button>
    </wa-dialog>
    {% endfor %}
  </div>
</div>

{% endif %}
{%- endblock htmBodyMiddleCompanyEventPage %}

