        <sl-details open>
          <div slot="summary">Map of CrowdFlowObserveds</div>

{%- block htmBodyGraphLocationCrowdFlowObservedPage %}
{% if resultCount > 0 %}
        <div id="htmBodyGraphLocationCrowdFlowObservedPage" class="htmBodyGraphLocation "></div>
{% endif %}
{%- endblock htmBodyGraphLocationCrowdFlowObservedPage %}

{%- block htmBodyGraphCrowdFlowObservedPage %}
        <div id="htmBodyGraphCrowdFlowObservedPage" class="htmBodyGraph "></div>
{%- endblock htmBodyGraphCrowdFlowObservedPage %}
        </sl-details>
          <div class="htmBodySidebarCrowdFlowObservedPage ">
{%- block htmBodySidebarCrowdFlowObservedPage %}
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleSearch">
            <div slot="label">
              <i class="{{ FONTAWESOME_STYLE }} fa-magnifying-glass "></i>
              Search
            </div>
            <div>
              {%- block htmBodySearchCrowdFlowObservedPage %}
              <div>
                {% for key, value in varsQ.items() %}
                <div>
                  <div>
                    <label for="qCrowdFlowObserved_{{ key }}">{{ value.displayName }}<sup> ({{ value.classSimpleName }})</sup></label>
                  </div>
                </div>
                <div>
                  <div>
                    <sl-input id="qCrowdFlowObserved_{{ key }}" placeholder="{{ displayName }}" data-var="{{ key }}" autocomplete="off="></sl-input>
                    <div id="qCrowdFlowObservedDiv_{{ key }}" class="pageSearchVal "></div>
                  </div>
                </div>
                {% endfor %}
                <div>
                  <div>
                    <label for="qCrowdFlowObserved_Start">start<sup> (Long)</sup></label>
                  </div>
                </div>
                <div>
                  <div>
                    <sl-input id="qCrowdFlowObserved_start" placeholder="{{ displayName }}" class="" data-var="start" autocomplete="off=" value="{{ start }}"></sl-input>
                    <div id="qCrowdFlowObservedDiv_start" class="pageSearchVal ">start={{ start }}</div>
                  </div>
                </div>
                <div>
                  <div>
                    <label for="qCrowdFlowObserved_Rows">rows<sup> (Long)</sup></label>
                  </div>
                </div>
                <div>
                  <div>
                    <sl-input id="qCrowdFlowObserved_rows" placeholder="{{ displayName }}" class="" data-var="rows" autocomplete="off" value="{{ rows }}"></sl-input>
                    <div id="qCrowdFlowObservedDiv_rows" class="pageSearchVal ">rows={{ rows }}</div>
                  </div>
                </div>
              </div>
              {%- endblock htmBodySearchCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleFilters">
            <div slot="label">
              <span>
              <i class="{{ FONTAWESOME_STYLE }} fa-filters "></i> Filters</span>
            </div>
            <div>
              {%- block htmBodyFiltersCrowdFlowObservedPage %}
              <div class="flex flex-column gap-l ">
                {% for key, value in varsFq.items() %}
                <div>
                  <div>
                    <label for="fqCrowdFlowObserved_{{ key }}">{{ value.displayName }}<sup> ({{ value.classSimpleName }})</sup></label>
                    <sl-tooltip for="buttonFacetCrowdFlowObserved_{{ key }}">see values</sl-tooltip>
                    <div class="flex round-column pill-smart-border-radius ">
                      <sl-button variant="primary" outline id="buttonFacetCrowdFlowObserved_{{ key }}" data-var="{{ value.var }}" data-clear="{% if value.facetField is defined %}true{% else %}false{% endif %}"><i class="{{ FONTAWESOME_STYLE }} fa-list "></i></sl-button>
                      <sl-input id="fqCrowdFlowObserved_{{ key }}" placeholder="{{ value.displayName }}" class="" onchange="fqChange('CrowdFlowObserved', this); " data-var="{{ value.var }}" autocomplete="off=" value="{{ value.val }}"></sl-input>
                    </div>
                    <div class="pageSearchVal " id="pageSearchVal-fqCrowdFlowObserved_{{ key }}">{% if value.val is defined %}fq={{ value.var }}:{{ value.val | urlencode() }}{% endif %}</div>
                    <div class="pageSearchVal " id="pageSearchVal-buttonFacetCrowdFlowObserved_{{ key }}">{% if value.facetField.var is defined %}facet.field={{ value.facetField.var }}{% endif %}</div>
                  </div>
                  <div>
                    <div class="pageFacetField pageFacetFieldCrowdFlowObserved_{{ key }} " id="pageFacetFieldCrowdFlowObserved_{{ key }}">
                      {% for facetFieldKey, facetFieldValue in value.facetField.counts.items() %}
                      <div>
                        <sl-tooltip content="{{ facetFieldValue | e }} CrowdFlowObserved total with {{ value.facetField.var | e }} &quot;{{ facetFieldKey | e }}&quot;"></sl-tooltip>
                        <div class="cursor-pointer raised-item " data-class="CrowdFlowObserved" data-var="{{ value.facetField.var }}" data-val="{{ facetFieldKey }}" onclick="if(document.querySelector('#fqCrowdFlowObserved_{{ key }}')?.value === '{{ facetFieldKey }}') this.setAttribute('data-val', ''); fqReplace('CrowdFlowObserved', this); ">{{ facetFieldValue }}: {{ facetFieldKey }}</div>
                      </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
              {%- endblock htmBodyFiltersCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleSort">
            <div slot="label">
              <i class="{{ FONTAWESOME_STYLE }} fa-arrow-down-a-z "></i>
              Sort
            </div>
            <div>
              {%- block htmBodySortCrowdFlowObservedPage %}
              <div id="pageSearchVal-pageSort-CrowdFlowObserved">
              {% for key, value in varsFq.items() %}
              {% if defaultSortVars is defined and ((key + ' asc') in defaultSortVars or (key + ' desc') in defaultSortVars) %}
                  <div class="pageSearchVal pageSearchVal-pageSort-CrowdFlowObserved pageSearchVal-pageSort-CrowdFlowObserved-{{ key }} " id="pageSearchVal-pageSort-CrowdFlowObserved-{{ key }}">{% if defaultSortVars is defined and (key + ' asc') in defaultSortVars %}sort={{ key }} asc{% else %}{% if defaultSortVars is defined and (key + ' desc') in defaultSortVars %}sort={{ key }} desc{% endif %}{% endif %}</div>
              {% endif %}
              {% endfor %}
              </div>
              {% for key, value in varsFq.items() %}
              <div>
                <sl-radio-group orientation="horizontal" name="pageFacetSort" class="pageFacetSort " id="pageFacetSortCrowdFlowObserved_{{ key }}" value="{% if (key + ' asc') in defaultSortVars %}asc{% else %}{% if (key + ' desc') in defaultSortVars %}desc{% endif %}{% endif %}"{% if pivot is defined %} checked="checked"{% endif %} label={{ value.displayName | tojson }} size="small">
                  <sl-radio-button value="" pill>none</sl-radio-button>
                  <sl-radio-button value="asc" pill>ascending</sl-radio-button>
                  <sl-radio-button value="desc" pill>descending</sl-radio-button>
                </sl-radio-group>
              </div>
              {% endfor %}
              {%- endblock htmBodySortCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleRange">
            <div slot="label">
              <span>
              <i class="{{ FONTAWESOME_STYLE }} fa-calendar-range "></i> Range</span>
            </div>
            <div>
              {%- block htmBodyRangeCrowdFlowObservedPage %}
              <table>
                <tr>
                  <td colspan="2">
                    <div class="pageSearchVal " id="pageSearchVal-pageFacetRangeGap-CrowdFlowObserved">{% if rangeGap is defined %}facet.range.gap={{ rangeGap | urlencode() }}{% endif %}</div>
                    <div class="pageSearchVal " id="pageSearchVal-pageFacetRangeStart-CrowdFlowObserved">{% if rangeStart is defined %}facet.range.start={{ rangeStart | urlencode() }}{% endif %}</div>
                    <div class="pageSearchVal " id="pageSearchVal-pageFacetRangeEnd-CrowdFlowObserved">{% if rangeEnd is defined %}facet.range.end={{ rangeEnd | urlencode() }}{% endif %}</div>
                    <div class="pageSearchVal " id="pageSearchVal-pageFacetRangeVar-CrowdFlowObserved">{% if defaultRangeVar is defined %}facet.range={!tag=r1}{{ defaultRangeVar | urlencode() }}{% endif %}</div>
                  </td>
                </tr>
              </table>
              <table>
                <tr class="">
                  <td class="">
                    <span>Range Gap</span>
                  </td>
                  <td class="">
                    <sl-select name="facet.range.gap" id="pageSearchVal-pageFacetRangeGap-CrowdFlowObserved-input" onchange="facetRangeGapChange('CrowdFlowObserved', this); ">
                      <sl-option value="+1YEAR"{% if defaultRangeGap == '+1YEAR' %} selected="selected"{% else %}{% endif %}>Year</sl-option>
                      <sl-option value="+1MONTH"{% if defaultRangeGap == '+1MONTH' %} selected="selected"{% else %}{% endif %}>Month</sl-option>
                      <sl-option value="+1WEEK"{% if defaultRangeGap == '+1WEEK' %} selected="selected"{% else %}{% endif %}>Week</sl-option>
                      <sl-option value="+1DAY"{% if defaultRangeGap == '+1DAY' %} selected="selected"{% else %}{% if defaultRangeGap is defined %}{% else %} selected="selected"{% endif %}{% endif %}>Day</sl-option>
                      <sl-option value="+1HOUR"{% if defaultRangeGap == '+1HOUR' %} selected="selected"{% else %}{% endif %}>Hour</sl-option>
                      <sl-option value="+1MINUTE"{% if defaultRangeGap == '+1MINUTE' %} selected="selected"{% else %}{% endif %}>Minute</sl-option>
                      <sl-option value="+1SECOND"{% if defaultRangeGap == '+1SECOND' %} selected="selected"{% else %}{% endif %}>Second</sl-option>
                    </sl-select>
                  </td>
                </tr>
                <tr class="">
                  <td class="" colspan="2">
                    <span>Range Start</span>
                  </td>
                </tr>
                <tr class="">
                  <td class="" colspan="2">
                    <span><sl-input type="datetime-local" name="facetRangeStart" id="pageFacetRangeStart-CrowdFlowObserved" value="{{ formatZonedDateTime(defaultRangeStart, "yyyy-MM-dd'T'HH:mm", defaultLocaleId, defaultZoneId) }}" onclick="facetRangeStartChange('CrowdFlowObserved', this); "></sl-input></span>
                  </td>
                </tr>
                <tr class="">
                  <td class="" colspan="2">
                    <span>Range End</span>
                  </td>
                </tr>
                <tr class="">
                  <td class="" colspan="2">
                    <span><sl-input type="datetime-local" name="facetRangeEnd" id="pageFacetRangeEnd-CrowdFlowObserved" value="{{ formatZonedDateTime(defaultRangeEnd, "yyyy-MM-dd'T'HH:mm", defaultLocaleId, defaultZoneId) }}" onclick="facetRangeEndChange('CrowdFlowObserved', this); "></sl-input></span>
                  </td>
                </tr>
              </table>
              <sl-radio-group id="pageFacetRangeCrowdFlowObserved">                {% for key, value in varsRange.items() %}
                <sl-radio name="pageFacetRange" class="pageFacetRange " id="pageFacetRangeCrowdFlowObserved_{{ key }}" value="{{ value.var }}"{% if defaultRangeVar == var %} checked="checked"{% endif %}>{{ value.displayName }}</sl-radio>
                {% endfor %}
              </sl-radio-group>
              {%- endblock htmBodyRangeCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarTogglePivot">
            <div slot="label">
              <span>
              <i class="{{ FONTAWESOME_STYLE }} fa-table-pivot "></i> Pivot</span>
            </div>
            <div>
              {%- block htmBodyPivotCrowdFlowObservedPage %}
              <div style="display: none; " id="pageSearchVal-PivotCrowdFlowObservedHidden">
                {% for item in defaultPivotVars %}
                  <div class="pageSearchVal-PivotCrowdFlowObservedHidden " id="pageSearchVal-PivotCrowdFlowObservedHidden_{{ item }}">{{ item }}</div>
                {% endfor %}
              </div>
              <div id="pageSearchVal-PivotCrowdFlowObserved">
                {% if defaultPivotVars is defined and defaultPivotVars.length > 0 %}
                  <div class="pageSearchVal pageSearchVal-PivotCrowdFlowObserved " id="pageSearchVal-PivotCrowdFlowObserved_1">facet.pivot={!range=r1}{% for item in defaultPivotVars %}{% if loop.index > 0 %},{% endif %}{{ item }}{% endfor %}</div>
                {% endif %}
              </div>
              {% for key, value in varsFq.items() %}
              <div>
                <sl-checkbox name="pageFacetPivot" class="pageFacetPivot " id="pageFacetPivotCrowdFlowObserved_{{ key }}" value="{{ value.var }}"{% if pivot is defined %} checked="checked"{% endif %}>{{ value.displayName }}</sl-checkbox>
              </div>
              {% endfor %}
              {%- endblock htmBodyPivotCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleFieldList">
            <div slot="label">
              <span>
              <i class="{{ FONTAWESOME_STYLE }} fa-list-ul "></i> Field List</span>
            </div>
            <div>
{%- block htmBodyFieldListCrowdFlowObservedPage %}
              <div style="display: none; " id="pageSearchVal-FieldListCrowdFlowObservedHidden">
                {% for item in defaultFieldListVars %}
                  <div class="pageSearchVal-FieldListCrowdFlowObservedHidden " id="pageSearchVal-FieldListCrowdFlowObservedHidden_{{ item }}">{{ item }}</div>
                {% endfor %}
              </div>
              {% if defaultFieldListVars is defined and defaultFieldListVars.length > 0 %}
              <div id="pageSearchVal-FieldListCrowdFlowObserved">
                {% if defaultFieldListVars is defined %}
                  <div class="pageSearchVal pageSearchVal-FieldListCrowdFlowObserved " id="pageSearchVal-FieldListCrowdFlowObserved_1">fl={% for item in defaultFieldListVars %}{% if loop.index > 0 %},{% endif %}{{ item }}{% endfor %}</div>
                {% endif %}
              </div>
              {% endif %}
              {% for key, value in varsFq.items() %}
              <div>
                <sl-checkbox name="pageFieldList" class="pageFieldList " id="pageFieldListCrowdFlowObserved_{{ key }}" value="{{ value.var }}"{% if fieldList is defined %} checked="checked"{% endif %} onclick="facetFieldListChange('CrowdFlowObserved', value); ">{{ value.displayName }}</sl-checkbox>
              </div>
                {% endfor %}
{%- endblock htmBodyFieldListCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
          <sl-drawer with-header light-dismiss placement="end" id="siteSidebarToggleStats">
            <div slot="label">
              <i class="{{ FONTAWESOME_STYLE }} fa-chart-candlestick "></i>
              Stats
            </div>
            <div>
{%- block htmBodyStatsCrowdFlowObservedPage %}
              <div style="display: none; " id="pageSearchVal-StatsCrowdFlowObservedHidden">
                {% for item in defaultStatsVars %}
                  <div class="pageSearchVal-StatsCrowdFlowObservedHidden " id="pageSearchVal-StatsCrowdFlowObservedHidden_{{ item }}">{{ item }}</div>
                {% endfor %}
              </div>
              <div id="pageSearchVal-StatsCrowdFlowObserved">
                {% if defaultStatsVars is defined %}
                  {% for item in defaultStatsVars %}
                    <div class="pageSearchVal pageSearchVal-StatsCrowdFlowObserved_{{ item }} " id="pageSearchVal-StatsCrowdFlowObserved_{{ item }}">stats.field={{ item }}                    </div>
                  {% endfor %}
                {% endif %}
              </div>
              <table>
                {% for key, value in varsFq.items() %}
                  {% if enableStats is defined %}
                    <tr class="">
                      <td class="">
                        <span><sl-checkbox name="pageStats" class="pageStats " id="pageStatsCrowdFlowObserved_{{ key }}" value="{{ value.var }}"{% if value.stats is defined %} checked="checked"{% endif %} onclick="facetStatsChange('CrowdFlowObserved', value); ">{{ value.displayName }}</sl-checkbox></span>
                      </td>
                      <td>
                        <div>
                          <label for="pageStatsCrowdFlowObserved_{{ key }}">{{ value.displayName }}</label>
                        </div>
                        <div class="pageStatsField pageStatsFieldCrowdFlowObserved_{{ key }} " id="pageStatsFieldCrowdFlowObserved_{{ key }}">
                          {% if value.stats is defined %}
                            {% for item in value.stats %}
                              {% if item.key == 'name' %}{% else %}
                                <div data-class="CrowdFlowObserved" data-var="{{ item.var }}" data-val="{{ item.key }}">{{ item.key }}: {{ item }}</div>
                              {% endif %}
                            {% endfor %}
                            {% if value.stats.max is defined %}
                              <div>
                                <span> step </span>
                                <sl-input id="animateStatsStep" placeholder="step" value="1" style="width: 4em; "></sl-input>
                                <span> min </span>
                                <sl-input id="animateStatsMin" placeholder="min" value="{{ value.stats.min }}" style="width: 4em; "></sl-input>
                                <span> max </span>
                                <sl-input id="animateStatsMax" placeholder="max" value="{{ value.stats.max }}" style="width: 4em; "></sl-input>
                                <span> speed in seconds </span>
                                <sl-input id="animateStatsSpeed" placeholder="speed" value="1" style="width: 4em; "></sl-input>
                                <sl-button variant="primary" outline onclick="animateStats(); ">animate</sl-button>
                              </div>
                            {% endif %}
                          {% endif %}
                        </div>
                      </td>
                    </tr>
                  {% endif %}
                {% endfor %}
              </table>
{%- endblock htmBodyStatsCrowdFlowObservedPage %}
            </div>
          </sl-drawer>
{%- endblock htmBodySidebarCrowdFlowObservedPage %}
        </div>
